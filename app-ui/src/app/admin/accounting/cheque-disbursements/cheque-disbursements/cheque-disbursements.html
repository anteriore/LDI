
<div class="main-header">
	<div class="horizontal-align -between content">
		<h3 class="title">Cheque Disbursements</h3>
    </div>
    
    <!-- <a href="/admin/accounting/cheque-disbursement-tolling/new" ng-click="" class="btn btn-create btn-md button-link" style="background-color:blueviolet;">Create AR Tolling</a> -->
	<a href="/admin/accounting/cheque-disbursement/new" ng-click="" class="btn btn-create btn-md button-link">Create Cheque Disbursement</a>
</div>
<div class='client-pris'>
  <div class="search-box horizontal-align -between">
      <div class="input-group-addon" style="border: 0	 !important;">
          <i class="fa fa-search"></i>
        </div>
        <input class="form-control -borderless search" placeholder="Cheque No" type="text" name="search" ng-model="$ctrl.searchNumber"
        />
  </div>
</div>
	<table class='table table-list'>
		<thead>
			<tr>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'number';$ctrl.sortReverse = !$ctrl.sortReverse;">No
                <span ng-show="$ctrl.sortType == 'number' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'number' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'date';$ctrl.sortReverse = !$ctrl.sortReverse;">Date
                <span ng-show="$ctrl.sortType == 'date' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'date' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
          	<th>
            <a href="#" ng-click="$ctrl.sortType = 'payeeName';$ctrl.sortReverse = !$ctrl.sortReverse;">Payee Name
                <span ng-show="$ctrl.sortType == 'payeeName' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'payeeName' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>

          </th>
          <th> <a href="#" ng-click="$ctrl.sortType = 'chequeNumber';$ctrl.sortReverse = !$ctrl.sortReverse;">Cheque No
                <span ng-show="$ctrl.sortType == 'chequeNumber' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'chequeNumber' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          </th>
          <th> <a href="#" ng-click="$ctrl.sortType = 'chequeDate';$ctrl.sortReverse = !$ctrl.sortReverse;">Cheque Date
                <span ng-show="$ctrl.sortType == 'chequeDate' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'chequeDate' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          </th>
          <th> <a href="#" ng-click="$ctrl.sortType = 'bankAccount';$ctrl.sortReverse = !$ctrl.sortReverse;">Bank Acc
                <span ng-show="$ctrl.sortType == 'bankAccount' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'bankAccount' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          </th>
          <th> <a href="#" ng-click="$ctrl.sortType = 'totalAmount';$ctrl.sortReverse = !$ctrl.sortReverse;">Amount
                <span ng-show="$ctrl.sortType == 'totalAmount' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'totalAmount' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          </th>
                <th></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="cp in $ctrl.chequeDisbursements " >
				<td>{{cp.chequePrinting.number}}</td>
				<td>{{cp.chequePrinting.vendor.code}}</td>
				<td>{{cp.chequePrinting.vendor.name}}</td>
				<td>{{cp.chequePrinting.chequeNumber}}</td>
				<td>{{cp.chequePrinting.chequeDate | date}}</td>
				<td>{{cp.chequePrinting.bankAccount.name}}</td>
				<td>{{cp.chequePrinting.totalAmount}}</td>
				<td class='tablebutton-form'>
					<div class='holder'>
                        <button class='btn btn-compose' data-toggle="modal" ng-click="$ctrl.openModal(cp)" data-target="#cpModal" class='btn btn-show'>
                            <i class="ion-ios-eye-outline" ></i>
                        </button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>	
</div>



<div class='modal fade' id='cpModal'>
		<div class="modal-dialog -bg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						Select CP
					</h4>
					<button class="close" data-dismiss="modal" type="button">
					</button>
				</div>
					<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">CP Number</label>
								<input type="text" ng-if="$ctrl.cp.chequePrinting.number" readonly class="form-control -border" ng-value="$ctrl.cp.chequePrinting.number"/>
								<input type="text" ng-if="$ctrl.cp.chequePrinting.number == null" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
								
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		

		<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Payee Code</label>
			    		<input type="text" ng-model="$ctrl.cp.chequePrinting.vendor.code" readonly  class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Payee</label>
			    		<input type="text" ng-model="$ctrl.cp.chequePrinting.vendor.name" readonly  class="form-control -border"/>
			    </div>
			  </div>
			</div>
			<div ng-if="$ctrl.cp.chequePrinting.vendor">
				<table class='table table-list'>
					<thead>
						<tr>
							<th>VP #</th>
							<th>Date</th>
							<th>Payee</th>
							<th>Remarks</th>
							<th>Amount</th>
							<th>View</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="v in $ctrl.cp.chequePrinting.payables">
							<td>{{v.number}}</td>
							<td>{{v.date | date}}</td>
							<td>{{v.vendor.name}}</td>
							<td>{{v.remarks}}</td>
							<td>{{v.totalAmount.toFixed(2)}}</td>
							<td>
				 				<a href="#" class="button-link btn btn-primary btn-md" ng-click="$ctrl.viewVp(v)" data-target="#vpModal" data-toggle="modal">View</a>
							</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th>Total Amount:</th>
							<th>{{$ctrl.cp.chequePrinting.totalAmount.toFixed(2)}}</th>
						</tr>
					</tfoot>
				</table>
			</div>
			
			<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Cheque No</label>
								<input type="text" ng-model="$ctrl.cp.chequePrinting.chequeNumber" readonly class="form-control -border"/>
								
							</div>
						</div>
					</div>
					<div class="side-two">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Cheque Date</label>
								<input type="text" ng-model="$ctrl.cp.chequePrinting.chequeDate" readonly class="form-control -border" />
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Payee Name</label>
								<input type="text" ng-model="$ctrl.cp.chequePrinting.payeeName" readonly  class="form-control -border" />
								
							</div>
						</div>
					</div>
					<div class="side-two">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Bank Account</label>
								<input type="text" ng-model="$ctrl.cp.chequePrinting.bankAccount.name" readonly  class="form-control -border" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<account-title-table
			accounttitles="$ctrl.cp.accountTitles",
			readonly="false"
		></account-title-table>
					
					</div>
				</div>
			</div>
		</div>
	</div>


	  