<style>
	.highlightred{
		background-color:red;
	}
	
	.highlight{
		background-color:#7ed321;
	}
</style>


<form novalidate ng-submit="$ctrl.submitForm();" method="post">
		
		<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">VP Number</label>
								<input type="text" ng-if="$ctrl.vp.number" readonly class="form-control -border" ng-value="$ctrl.vp.number"/>
								<input type="text" ng-if="$ctrl.vp.number == null" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
								
							</div>
						</div>
					</div>
					
					<div class="side-two">
						<div class="form-group">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Date</label>
									<input type="text" class="form-control -border" readonly ng-value="$ctrl.vp.date
									 | date:'dd/MM/yyyy'"/>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<select ng-model="$ctrl.vp.variation" ng-change="$ctrl.toggleVariation()">
			<option value="1 Voucher">1 Voucher</option>
			<option value="Multiple PJV">Multiple PJV</option>
			<option value="Multiple JV">Multiple JV</option>
		</select>
		
		<div ng-if="$ctrl.vp.variation == '1 Voucher'">
		<div class="horizontal-align -start rmpm-content">
			<div class="horizontal-align -start rmpm-code">
				<div class="form-group rmpm action">
					<a href="#" class="button-link btn btn-action btn-md" ng-click="$ctrl.findNewVouchers()" data-target="#selectVoucherModal"
					 data-toggle="modal">Select Voucher</a>
				</div>
				<div class="form-group rmpm">
					<label class="label capitalize-text">Voucher Number</label>
					<input  disabled type="text" ng-model="$ctrl.vp.voucher.number" readonly class="form-control -border"
					/>
				</div>
				<div class="form-group rmpm">
					<label class="label capitalize-text">Date</label>
					<p class="form-control -border">{{$ctrl.vp.voucher.date | date}}</p>
				</div>
			</div>
		</div>
		
		<div class="form-content">
			<div class="step-form">
					<div class="horizontal-align -between">
						<div class="side-one">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Payee Code</label>
									<input type="text" readonly class="form-control -border" ng-model="$ctrl.vp.vendor.code" />
								</div>
								<div class="form-group field">
									<label class="label capitalize-text">Payee</label>
									<input type="text" readonly ng-model="$ctrl.vp.vendor.name" class="form-control -border" />
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
		
		<table class='table table-list'>
			<thead>
				<tr>
					<th>#</th>
					<th>SI #</th>
					<th>DR #</th>
					<th>PO #</th>
					<th>RR #</th>
					<th>Amount</th>
				</tr>
			</thead>
              <tbody>
              	<tr>
              		<td>{{$ctrl.vp.voucher.number}}</td>
              		<td>{{$ctrl.vp.voucher.siNumber}}</td>
              		<td>{{$ctrl.vp.voucher.drNumber}}</td>
              		<td>{{$ctrl.vp.voucher.poNumber}}</td>
              		<td>{{$ctrl.vp.voucher.rrNumber}}</td>
              		<td>{{$ctrl.vp.voucher.totalAmount.toFixed(2)}}</td>
              	</tr>
              	<tr ng-repeat="a in $ctrl.adjustments">
              		<td>{{a.number}}</td>
              		<td>{{a.siNumber}}</td>
              		<td>{{a.drNumber}}</td>
              		<td>{{a.poNumber}}</td>
              		<td>{{a.rrNumber}}</td>
              		<td>{{a.totalAmount.toFixed(2)}}</td>
              	</tr>
              </tbody>
              <tfoot>
              	<tr>
              		<td></td>
              		<td></td>
              		<td></td>
              		<td></td>
              		<td>Total Amount:</td>
              		<td>{{$ctrl.totalAmount.toFixed(2)}}</td>
              	</tr>
              </tfoot>
			</table>
		</div>
		
		<div ng-if="$ctrl.vp.variation == 'Multiple PJV'">
			<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm action">
			    		<a href="#" class="button-link btn btn-action btn-md" data-target="#findVendorModal" data-toggle="modal">Select Payee</a>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Payee Code</label>
			    		<input type="text" ng-model="$ctrl.vp.vendor.code" class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Payee</label>
			    		<input type="text" ng-model="$ctrl.vp.vendor.name" class="form-control -border"/>
			    </div>
			  </div>
			</div>
			<div ng-if="$ctrl.vp.vendor">
				<table class='table table-list'>
					<thead>
						<tr>
							<th>#</th>
							<th>SI #</th>
							<th>DR #</th>
							<th>PO #</th>
							<th>RR #</th>
							<th>Amount</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="v in $ctrl.vp.vouchers">
							<td>{{v.number}}</td>
							<td>{{v.siNumber}}</td>
							<td>{{v.drNumber}}</td>
							<td>{{v.poNumber}}</td>
							<td>{{v.rrNumber}}</td>
							<td>{{v.totalAmount.toFixed(2)}}</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th>Total Amount:</th>
							<th>{{$ctrl.totalAmount.toFixed(2)}}</th>
						</tr>
					</tfoot>
				</table>
				<div class="request-action">
				 <a href="#" class="button-link btn btn-action btn-md" ng-click="$ctrl.findPurchaseVouchersWithoutAdjustments()" data-target="#selectMultipleVoucherModal" data-toggle="modal">Select Voucher</a>
				</div>
			</div>
		</div>
		
		<div ng-if="$ctrl.vp.variation == 'Multiple JV'">
			<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm action">
			    		<a href="#" class="button-link btn btn-action btn-md" data-target="#findVendorModal" data-toggle="modal">Select Payee</a>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Payee Code</label>
			    		<input type="text" ng-model="$ctrl.vp.vendor.code" class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Payee</label>
			    		<input type="text" ng-model="$ctrl.vp.vendor.name" class="form-control -border"/>
			    </div>
			  </div>
			</div>
			<div ng-if="$ctrl.vp.vendor">
				<table class='table table-list'>
					<thead>
						<tr>
							<th>#</th>
							<th>SI #</th>
							<th>DR #</th>
							<th>PO #</th>
							<th>RR #</th>
							<th>Amount</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="v in $ctrl.vp.vouchers">
							<td>{{v.number}}</td>
							<td>{{v.siNumber}}</td>
							<td>{{v.drNumber}}</td>
							<td>{{v.poNumber}}</td>
							<td>{{v.rrNumber}}</td>
							<td>{{v.totalAmount.toFixed(2)}}</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th>Total Amount:</th>
							<th>{{$ctrl.totalAmount.toFixed(2)}}</th>
						</tr>
					</tfoot>
				</table>
				<div class="request-action">
				 <a href="#" class="button-link btn btn-action btn-md" ng-click="$ctrl.findJournalVouchersWithoutAdjustments()" data-target="#selectMultipleVoucherModal" data-toggle="modal">Select JV</a>
				</div>
			</div>
		</div>
		</div>
		
		<account-title-table
			accounttitles="$ctrl.vp.accountTitles",
			readonly="false"
		></account-title-table>
		
			<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Remarks</label>
							<textarea type="text" class="form-control -border" ng-model="$ctrl.vp.remarks"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
			<div class="request-action">
					<button type="submit" class="btn btn-create btn-md">{{$ctrl.button}}</button>
				</div>
	
	
</form>



<div class='modal fade' id='selectVoucherModal'>
		<div class="modal-dialog -bg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						Find Voucher
					</h4>
					<button class="close" data-dismiss="modal" type="button">
					</button>
				</div>
					<div class="wrapper scroll-section">
						<table class='table table-hover'>
							<thead>
								<tr>
									<th>Number</th>
									<th>Date</th>
									<th>Status</th>
									<th>DR</th>
									<th>SI</th>
									<th>PO</th>
									<th>RR</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="v in $ctrl.vouchers">
									<td>{{v.number}}</td>
									<td>{{v.date | date}}</td>
									<td>{{v.status}}</td>
									<td>{{v.drNumber}}</td>
									<td>{{v.siNumber}}</td>
									<td>{{v.poNumber}}</td>
									<td>{{v.rrNumber}}</td>
									<td>
										<button class="btn btn-primary" ng-click="$ctrl.selectVoucher(v)" data-dismiss="modal" type="button">Select</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>


<div class='modal fade' id='selectMultipleVoucherModal'>
		<div class="modal-dialog -bg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						Select Voucher
					</h4>
					<button class="close" data-dismiss="modal" type="button">
					</button>
				</div>
				<div class="search-box horizontal-align -between">
			      <div class="input-group-addon" style="border: 0	 !important;">
			          <i class="fa fa-search"></i>
			        </div>
			        <input class="form-control -borderless search" placeholder="Voucher No" type="text" name="search" ng-model="$ctrl.searchNumber"
			        />
			        <input class="form-control -borderless search" placeholder="RR No" type="text" name="search" ng-model="$ctrl.searchRRNumber" />
			  </div>
					<div class="wrapper scroll-section">
						<table class='table table-hover'>
							<thead>
								<tr>
									<th>Number</th>
									<th>Date</th>
									<th>Status</th>
									<th>DR</th>
									<th>SI</th>
									<th>PO</th>
									<th>RR</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr ng-click="$ctrl.selectMultipleVouchers(v) | filter: {number: $ctrl.searchNumber, rrNumber: $ctrl.searchRRNumber} " ng-class="{highlight: $ctrl.vp.vouchers.indexOf(v) !== -1}" ng-repeat="v in $ctrl.vouchers">
									<td>{{v.number}}</td>
									<td>{{v.date | date}}</td>
									<td>{{v.status}}</td>
									<td>{{v.drNumber}}</td>
									<td>{{v.siNumber}}</td>
									<td>{{v.poNumber}}</td>
									<td>{{v.rrNumber}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

<find-vendor-modal
			vendor="$ctrl.vp.vendor"
            message="{{ $ctrl.error }}"
            button="Select Vendor"
            >
    </find-vendor-modal>
	  
