<style>
	.highlightred{
		background-color:red;
	}
</style>
<form novalidate ng-submit="$ctrl.submitForm();" method="post">
	<div class="form-content">
		<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">RR Number</label>
							<input type="text" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
						</div>
					</div>
				</div>
				<div class="side-two">
					<div class="form-group">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Date</label>
								<input type="date" class="form-control -border" ng-model="$ctrl.rr.date"/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm action">
			    		<a href="#" class="button-link btn btn-action btn-md" data-target="#findPurchaseOrderModal" data-toggle="modal">Select PO</a>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">P.O. #</label>
			    		<input type="text" ng-model="$ctrl.rr.purchaseOrder.number" readonly class="form-control -border"/>
			    </div>
			    <div class="form-group rmpm">
			    		<input type="hidden"  ng-model="$ctrl.rr.purchaseOrder.id"/>
			    		<label class="label capitalize-text">Code</label>
			    		<input type="text" ng-model="$ctrl.rr.purchaseOrder.vendor.code" ng-change="$ctrl.loadToReceivedItems()" readonly class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Name</label>
			    		<input type="text" ng-model="$ctrl.rr.purchaseOrder.vendor.name" readonly class="form-control -border"/>
			    </div>
			  </div>
		</div>
		<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Received By</label>
			    			<input type="text" ng-value="$ctrl.rr.receivedBy.department.name"  class="form-control -border"/>
            			</div>
					</div>
				</div>
				<div class="side-two">
					<div class="form-group">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label for="department">DR</label>
								<input type="text" ng-model="$ctrl.rr.drNumber" class="form-control -border"/>
							</div>
							<div class="form-group field">
								<label for="department">SI</label>
								<input type="text" ng-model="$ctrl.rr.siNumber" class="form-control -border"/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Origin</label>
							<input type="text" class="form-control -border" ng-model="$ctrl.rr.origin"/>
						</div>
						<div class="form-group field">
							<label class="label capitalize-text">P.O. Number</label>
			    			<input type="text" ng-model="$ctrl.rr.purchaseOrder.number" class="form-control -border" readonly/>
            			</div>
					</div>
				</div>
			</div>
		</div>
		<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Remarks</label>
							<textarea type="text" class="form-control -border" ng-model="$ctrl.rr.remarks"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
		<table class='table table-list'>
              <thead>
                <tr>
                  <th>PRF #</th>
                  <th>Code</th>
                  <th>Item</th>
                  <th>Quantity</th>
                  <th>Previous RR</th>
                  <th>Lacking</th>
                  <th>Quantity Received</th>
                </tr>
              </thead>
              <tbody id='table-less-padding'>
                <tr ng-repeat="receivedItem in $ctrl.receivedItemsView" ng-class="{highlightred: $ctrl.rr.receivedItems[$index].quantity > receivedItem.quantityOrdered - receivedItem.pendingRr }">
                  <td>{{receivedItem.prfNumber}}</td>
                  <td>{{receivedItem.item.code}}</td>
                  <td>{{receivedItem.item.name}}</td>
                  <td>{{receivedItem.quantityOrdered}}</td>
                  <td>{{receivedItem.pendingRr}}</td>
                  <td>{{receivedItem.quantityOrdered - receivedItem.pendingRr}}</td>
                  <td><input ng-model="$ctrl.rr.receivedItems[$index].quantity"/></td>
                </tr>
              </tbody>
            </table>
	</div>
	<div class="request-action">
			<button type="submit" class="btn btn-create btn-md">{{$ctrl.button}}</button>
		</div>
</form>
	<find-purchase-order-modal
		po="$ctrl.rr.purchaseOrder"
		receiveditems="$ctrl.rr.receivedItems"
		receiveditemsview="$ctrl.receivedItemsView"
		message="{{ $ctrl.error }}"
            button="Select PO"
            >
    </find-purchase-order-modal>
	<find-vendor-modal
			vendor="$ctrl.po.vendor"
            message="{{ $ctrl.error }}"
            button="Select Vendor"
            >
    </find-vendor-modal>