
<div class="main-header">
	<div class="horizontal-align -between content">
		<h3 class="title">Journal Vouchers</h3>
    </div>
    
    <!-- <a href="/admin/accounting/purchase-voucher-tolling/new" ng-click="" class="btn btn-create btn-md button-link" style="background-color:blueviolet;">Create AR Tolling</a> -->
	<a ng-click="$ctrl.exportReport()" class="btn btn-warning btn-md button-link">Export</a>
	<a href="/admin/shared/print-journal-report/start/{{$ctrl.startDate}}/end/{{$ctrl.endDate}}" class="btn btn-primary btn-md button-link">Journal Report</a>
	<a href="/admin/shared/print-jv-report/start/{{$ctrl.startDate}}/end/{{$ctrl.endDate}}" class="btn btn-primary btn-md button-link">Generate Report</a>
	<a href="/admin/accounting/journal-voucher/new" ng-click="" class="btn btn-create btn-md button-link">Create JV</a>
</div>
<div class='client-pris'>
  <div class="search-box horizontal-align -between">
      <div class="input-group-addon" style="border: 0	 !important;">
          <i class="fa fa-search"></i>
        </div>
        <input class="form-control -borderless search" placeholder="JV No" type="text" name="search" ng-model="$ctrl.searchNumber"
        />
        <input class="form-control -borderless search" placeholder="RR No" type="text" name="search" ng-model="$ctrl.searchRRNumber" />
  </div>
  <div class="search-box horizontal-align -between">
   		<input class="form-control -borderless search" type="date" name="search" ng-model="$ctrl.startDate"
        />
        <input class="form-control -borderless search" type="date" name="search" ng-model="$ctrl.endDate" />
	</div>
			
</div>
	<table class='table table-list'>
		<thead>
			<tr>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'number';$ctrl.sortReverse = !$ctrl.sortReverse;">JV No
                <span ng-show="$ctrl.sortType == 'number' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'number' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'rrNumber';$ctrl.sortReverse = !$ctrl.sortReverse;">RR No
                <span ng-show="$ctrl.sortType == 'rrNumber' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'rrNumber' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'materialType';$ctrl.sortReverse = !$ctrl.sortReverse;">Vendor
                <span ng-show="$ctrl.sortType == 'materialType' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'materialType' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'quantity';$ctrl.sortReverse = !$ctrl.sortReverse;">DR
                <span ng-show="$ctrl.sortType == 'quantity' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'quantity' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'drNumber';$ctrl.sortReverse = !$ctrl.sortReverse;">SI
                <span ng-show="$ctrl.sortType == 'drNumber' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'drNumber' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
        </th>
				<th>
            <a href="#" ng-click="$ctrl.sortType = 'drsi';$ctrl.sortReverse = !$ctrl.sortReverse;">PO
                <span ng-show="$ctrl.sortType == 'drsi' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'drsi' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>

          </th>
          	<th>
            <a href="#" ng-click="$ctrl.sortType = 'drsi';$ctrl.sortReverse = !$ctrl.sortReverse;">Amount
                <span ng-show="$ctrl.sortType == 'drsi' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'drsi' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>

          </th>
          <th> <a href="#" ng-click="$ctrl.sortType = 'drsi';$ctrl.sortReverse = !$ctrl.sortReverse;">Status
                <span ng-show="$ctrl.sortType == 'drsi' && !$ctrl.sortReverse">
                    <i class="fa fa-caret-down"></i>
                </span>
                <span ng-show="$ctrl.sortType == 'drsi' && $ctrl.sortReverse">
                    <i class="fa fa-caret-up"></i>
                </span>
            </a>
          </th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="jv in $ctrl.journalVouchers | filter: {number: $ctrl.searchNumber, rrNumber: $ctrl.searchRRNumber} | orderBy:$ctrl.sortType:$ctrl.sortReverse"  >
				<td>{{jv.number}}</td>
				<td>{{jv.rrNumber}}</td>
				<td>{{jv.vendor.name}}</td>
				<td>{{jv.drNumber}}</td>
				<td>{{jv.siNumber}}</td>
				<td>{{jv.poNumber}}</td>
				<td>{{jv.totalAmount}}</td>
				<td>{{jv.status}}</td>
				<td class='tablebutton-form'>
					<div class='holder'>
                        <button class='btn btn-compose' data-toggle="modal" ng-click="$ctrl.openModal(jv)" data-target="#jvModal" class='btn btn-show'>
                            <i class="ion-ios-eye-outline" ></i>
                        </button>
						<button class='btn btn-compose' ng-if="jv.status == 'Pending'">
							<i class='ion-ios-compose-outline' ng-click="$ctrl.goToEdit(jv.id)"></i>
						</button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>	
</div>



<div class='modal fade' id='jvModal'>
    <div class='modal-dialog -bg'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h4 class='modal-title'>Journal Voucher</h4>
                <button data-dismiss="modal" class='close'>
                    <span class='ion-android-close close-modal'></span>
                </button>
            </div>
            <div class='modal-body'>
            	<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">JV Number</label>
								<input type="text" readonly class="form-control -border" ng-model="$ctrl.jv.number"/>
							</div>
						</div>
					</div>
					
					<div class="side-two">
						<div class="form-group">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Date</label>
									<p class="form-control -border">{{$ctrl.jv.date | date}}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		<div >
		<div class="form-content">
			<div class="step-form">
					<div class="horizontal-align -between">
						<div class="side-one">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">RR Number</label>
									<input type="text" readonly class="form-control -border" ng-model="$ctrl.jv.rrNumber" />
								</div>
								<div class="form-group field">
									<label class="label capitalize-text">Date</label>
									<p class="form-control -border">{{$ctrl.jv.rrDate | date}}</p>
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
		<div class="form-content">
			<div class="step-form">
					<div class="horizontal-align -between">
						<div class="side-one">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Payee Code</label>
									<input type="text" readonly class="form-control -border" ng-model="$ctrl.jv.vendor.code" />
								</div>
								<div class="form-group field">
									<label class="label capitalize-text">Payee</label>
									<input type="text" readonly ng-model="$ctrl.jv.vendor.name" class="form-control -border" />
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>

		<table class='table table-list'>
              <tbody>
              	<tr>
              		<th>SI #</th>
              		<td>{{$ctrl.jv.siNumber}}</td>
              	</tr>
              	<tr>
              		<th>DR #</th>
              		<td>{{$ctrl.jv.drNumber}}</td>
              	</tr>
              	<tr>
              		<th>PO #</th>
              		<td>{{$ctrl.jv.poNumber}}</td>
              	</tr>
              </tbody>
			</table>
		</div>
		
		
		<account-title-table
			accounttitles="$ctrl.jv.accountTitles"
			readonly="true"
		></account-title-table>
		<div class="form-content">
			<div class="step-form">
					<div class="horizontal-align -between">
						<div class="side-one">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Total Debit Amount</label>
									<input type="text" readonly class="form-control -border" ng-model="$ctrl.jv.totalDebitAmount" />
								</div>
								<div class="form-group field">
									<label class="label capitalize-text">Total Credit Amount</label>
									<input type="text" readonly ng-model="$ctrl.jv.totalCreditAmount" class="form-control -border" />
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
			<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Remarks</label>
							<textarea type="text" class="form-control -border" disabled ng-model="$ctrl.jv.remarks"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
            </div>
            <div class='modal-footer'>
                <p class='date'>Created at {{$ctrl.jv.date | date}}</p>
                <button class='btn btn-create' ng-if="$ctrl.jv.status == 'Pending'" ng-click="$ctrl.approve($ctrl.jv.id)" data-dismiss="modal">Approve</button>
        		<button class='btn btn-danger' ng-if="$ctrl.jv.status == 'Pending'" ng-click="$ctrl.reject($ctrl.jv.id)" data-dismiss="modal">Reject</button>
                <a target="_blank" href="/admin/shared/print-journal-voucher/{{$ctrl.jv.id}}" class="btn btn-info">Print JV</a>
                <button class='btn btn-cancel' data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


    